<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>QuickBooks Payments</title>
  </head>
  <body>
    <h2>Payment Form</h2>
    <form id="paymentForm">
      <label for="cardNumber">Card Number:</label>
      <input
        type="text"
        id="cardNumber"
        name="cardNumber"
        value="4111111111111111"
        required
      /><br /><br />
      <label for="expMonth">Expiry Month:</label>
      <input
        type="text"
        id="expMonth"
        name="expMonth"
        value="12"
        required
      /><br /><br />
      <label for="expYear">Expiry Year:</label>
      <input
        type="text"
        id="expYear"
        name="expYear"
        value="2025"
        required
      /><br /><br />
      <label for="cvc">CVC:</label>
      <input type="text" id="cvc" name="cvc" value="123" required /><br /><br />
      <label for="amount">Amount:</label>
      <input
        type="text"
        id="amount"
        name="amount"
        value="10.55"
        required
      /><br /><br />
      <button type="submit">Pay Now</button>
    </form>
    <p id="message"></p>

    <script>
      document
        .getElementById("paymentForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          const cardNumber = document.getElementById("cardNumber").value;
          const expMonth = document.getElementById("expMonth").value;
          const expYear = document.getElementById("expYear").value;
          const cvc = document.getElementById("cvc").value;
          const amount = document.getElementById("amount").value;
          const messageElement = document.getElementById("message");

          const accessToken =
            "eyJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiYWxnIjoiZGlyIn0.._atNLm8Qpwx259F1hAxD2Q.9YGfNvrJn0REp0Bue_RN6IjyyDlQMomtYw0adjD60kniGIW2OZSzcglnvAK6BkH0eWsSET8fZC54mJHX1Yda8Hz1p6tZfLCOWaojKu4visjjf_AuVLelIBpEe6nJ_1hqcs9dSomYbrPiKs01bUIeYmjhPH1ek0LF1HbMzqNYaOQQTLA9fbX8ncuKdVVIe6ry624n2bgAi90XumcE3ZNlmKvOFLwq8Bu0hkO0y3ECrikbTs3Wi3YmoETD-wDw5V_7cyfUjYFSkNyowYupiHg7U7ghjtzRdKzdY6dVqFMBDbj-0DOq_-omzWnNcIvA3_dYBd_64i4Bo5aKDcdYtVfwEz9s1LIwtSTvVMWGzQ_wITjC9ggvSF2JbddkEp7SWiO4Vws7GLP21xurtLZ5kJwQXopqv0PkQBwNJw8WTIeMiKG8BkI0u1NAHi5eCFaBRT1nv8hTuodUPlPFBDkgGT8pNvybeAqIu6ncxkrpkxD1ipRWOZMAYBEP96J2_fBkDiJEuwiTr1-lWzvYC7MCm-ctE9Z5GStc8VyUCd6p-diSP4JMwrDEJ3Tlvp-yuJNObwHiLKE3jFvgzzfoffunkNiA7haobnA5d38zswYud14HvDn94yWWbUmCBKAejOwthvEXu1OSJKK5uAyJsbKtuSpKcDtnrfxO0eky3IZqyc34hhwH0rf6YpTMkclrrsSysBckVllGKCnLerdDXpf5t_4Z25t_hiENu0_zzfywC7gZzuagLoAE41m7o27K2k1DpZBB.ggVbDZxkhfDF7XD9G9jhdg"; // Replace with your QuickBooks access token

          const paymentData = {
            amount: amount,
            currency: "USD",
            card: {
              expMonth: expMonth,
              expYear: expYear,
              address: {
                postalCode: "94103",
              },
              name: "Test User",
              cvc: cvc,
              number: cardNumber,
            },
          };

          try {
            const response = await fetch(
              "https://sandbox.api.intuit.com/quickbooks/v4/payments/charges",
              {
                method: "POST",
                headers: {
                  Authorization: `Bearer ${accessToken}`,
                  "Content-Type": "application/json",
                  Accept: "application/json",
                },
                body: JSON.stringify(paymentData),
              }
            );

            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const result = await response.json();
            messageElement.innerText =
              "Payment successful: " + JSON.stringify(result);
            messageElement.style.color = "green";
          } catch (error) {
            console.error("Error:", error);
            messageElement.innerText = "Payment failed: " + error.message;
            messageElement.style.color = "red";
          }
        });
    </script>
  </body>
</html>
